{% extends "layout.html" %}

{% block title %}{% endblock %}
{% block description %}{% endblock %}
{% block keywords %}{% endblock %}
{% block og_title %}{% endblock %}
{% block og_site_name %}{% endblock %}
{% block og_type %}{% endblock %}
{% block og_url %}{% endblock %}
{% block og_description %}{% endblock %}
{% block twitter_url %}{% endblock %}
{% block twitter_title %}{% endblock %}
{% block twitter_description %}{% endblock %}

{% block bodyclass %}single{% endblock %}

{% block main_content %}
    <header class="titling">
        <div class="inner bound clearfix">
            <div class="vitals">
                <h1>{{ earthquake_instance.place|place_format(earthquake_instance.date_time) }}</h1>
                <h2><time>{{ earthquake_instance.date_time|time_format }}</time></h2>
            </div>
            <div class="stats clearfix">
                <figure class="magnitude">
                    <div class="value">
                        <b>{{ earthquake_instance.mag|round_floating_point }}</b>
                        <a href="#define-magnitude" data-definition="magnitude" class="tip" title="What does 'magnitude' mean?">Define</a>
                    </div>
                    <figcaption>
                        <mark>Magnitude</mark>
                    </figcaption>
                </figure>
                <figure class="felt">
                    <div class="value">
                        <b>{{ earthquake_instance.felt|default('n/a', true) }}</b>
                    </div>
                    <figcaption>
                        <mark>People Felt It</mark>
                        <p><a href="{{ earthquake_instance.url }}#dyfi_form" target="_blank">Did you feel it too? Tell the USGS.</a></p>
                    </figcaption>
                </figure>
            </div>
        </div>
    </header>
    <div class="page-cols">
        <div class="inner bound clearfix">
            <div class="primary">
                <div class="dossier clearfix">
                    <section class="report clearfix">
                        <ul>
                            <li class="where">
                                <mark>{{ earthquake_instance.place|strip_and_format_state('')|safe }}</mark>
                                <ul>
                                    <li>Latitude: <b>{{ earthquake_instance.latitude }}</b></li>
                                    <li>Longitude: <b>{{ earthquake_instance.longitude }}</b></li>
                                </ul>
                            </li>
                            <li class="usgs">
                                <mark><a href="{{ earthquake_instance.url }}" target="_blank">USGS Source Report</a></mark>
                                <ul>
                                    <li>Status: <b>{{ earthquake_instance.status }}</b></li>
                                </ul>
                            </li>
                        </ul>
                        <ul>
                            <li class="vicinity">
                                <mark>Nearby Cities</mark>
                                <ul>
                                    {% for item in earthquake_instance.nearest_cities %}
                                        <li>{{ item.distance }}km ({{ item.distance|convert_km_to_miles }}mi) {{ item.direction }} of <b>{{ item.name|strip_state }}</b></li>
                                    {% else %}
                                        <li>None specified</li>
                                    {% endfor %}
                                </ul>
                            </li>
                            <li class="tweet">
                                <mark><a href="#">Share on Twitter</a></mark>
                            </li>
                            <li class="like">
                                <mark><a href="#">Share on Facebook</a></mark>
                            </li>
                        </ul>
                    </section><!--/ .report -->
                    <section class="map">
                        <div class="visualization ratio">
                            <div class="fill"></div>
                            <b class="img-contain"><img src="http://placekitten.com/634/412" alt="" /></b>
                        </div><!--/ .ratio -->
                    </section>
                </div><!--/ .dossier -->
                <div class="triptych clearfix">
                    <aside class="nearby">
                        <header>
                            <h1>Recent Incidents within 20km</h1>
                        </header>
                        <nav class="magnitude-log">
                            <ul>
                                {% for instance in nearest_instances %}
                                    <li><a href="{{ url_for('detail', id=instance.id) }}">
                                        <span>{{ instance.place|place_format(instance.date_time) }}</span>
                                        <mark>{{ instance.mag|round_floating_point }}</mark></a>
                                        <span>{{ instance.distance|round_floating_point }}km ({{ instance.distance|convert_km_to_miles }}mi)</span>
                                    </li>
                                {% else %}
                                    <li>None specified</li>
                                {% endfor %}
                            </ul>
                        </nav>
                    </aside><!--/ .nearby -->
                    <div class="charts clearfix">
                        <aside class="depth">
                            <header>
                                <h1>Incident Depth</h1>
                                <a href="#define-depth" data-definition="depth" class="tip" title="What does 'depth' mean?">Define</a>
                            </header>
                            <div class="column-chart from-ceiling" data-value="{{ earthquake_instance.depth }}" data-max="1000">
                                <div class="range"><b class="fill"></b></div>
                                <div class="marker origin"><span>Surface</span></div>
                                <div class="marker label"><span>{{ earthquake_instance.depth }} km</span></div>
                                <div class="marker conclusion"><span>1000 km</span></div>
                            </div>
                        </aside>
                        <aside class="intensity">
                            <header>
                                <h1>Incident Intensity</h1>
                                <a href="#define-intensity" data-definition="intensity" class="tip" title="What does 'intensity' mean?">Define</a>
                            </header>
                            <div class="column-chart from-floor" data-value="{{ earthquake_instance.cdi }}" data-max="10">
                                <div class="range"><b class="fill"></b></div>
                                <div class="marker origin"><span>10</span></div>
                                <div class="marker label"><span>{{ earthquake_instance.cdi }}</span></div>
                                <div class="marker conclusion"><span>0</span></div>
                            </div>
                        </aside>
                    </div><!--/ .charts -->
                </div><!--/ .triptych -->
            </div>
            <div class="supportive clearfix">
                <aside class="resources">
                    <h1>Earthquake links &amp; resources</h1>
                    <ul>
                        {% include 'resources.html' %}
                    </ul>
                </aside>
                <aside class="recents">
                    <h1>Recent SoCal Earthquakes</h1>
                    <nav>
                        <ul>
                            {% for instance in recent_instances %}
                                <li><a href="{{ url_for('detail', id=instance.id) }}">{{ instance.place|place_format(instance.date_time) }}</a></li>
                            {% endfor %}
                        </ul>
                    </nav>
                </aside>
            </div>
        </div>
    </div><!--/ .page-cols -->

    {% include 'glossary.html' %}

{% endblock %}