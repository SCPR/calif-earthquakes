{% extends "layout.html" %}

{% block title %}Earthquake Tracker | 89.3 KPCC{% endblock %}
{% block description %}89.3 KPCC's Earthquake Tracker is a tool for following and researching California earthquakes.{% endblock %}
{% block keywords %}KPCC, Southern California Public Radio, 89.3, 89.3 KPCC, Southern California, Pasadena, Los Angeles, Earthquakes, Earthquake Tracker, News{% endblock %}
{% block og_title %}Earthquake Tracker | 89.3 KPCC{% endblock %}
{% block og_url %}http://projects.scpr.org/earthquakes{% endblock %}
{% block og_description %}89.3 KPCC's Earthquake Tracker is a tool for following and researching California earthquakes.{% endblock %}
{% block twitter_description %}89.3 KPCC's Earthquake Tracker is a tool for following and researching California earthquakes.{% endblock %}
{% block twitter_title %}Earthquake Tracker | 89.3 KPCC{% endblock %}
{% block twitter_url %}http://projects.scpr.org/earthquakes{% endblock %}

{% block bodyclass %}landing{% endblock %}

{% block main_content %}
    <header class="prologue">
        <div class="inner bound clearfix">
            <section class="latest">
                <header>
                    <h1>Recent Earthquakes</h1>
                </header>
                <div class="roundup clearfix">
                    {% for earthquake in recent_earthquakes %}
                        <article>
                            <a href="{{ url_for('detail', title=earthquake.place|url_structure_format(earthquake.date_time), id=earthquake.id ) }}">
                                <h1>{{ earthquake.date_time|date_format('span')|safe }}</h1>
                                <ul>
                                    <li class="near">{{ earthquake.place|strip_and_format_state('mark')|safe }}</li>
                                    <li>Intensity: <mark>{{ earthquake.cdi }}</mark> <span>(of 10)</span></li>
                                    <li>Depth: <mark>{{ earthquake.depth }} km</mark></li>
                                </ul>
                                <aside class="magnitude">{{ earthquake.mag|round_floating_point }}</aside>
                            </a>
                        </article>
                    {% else %}
                        <h3><em>No earthquakes thus far</em></h3>
                    {% endfor %}
                </div>
            </section><!--/ .latest -->
            <section class="dashboard clearfix">
                <div class="controls">
                    <header>
                        <h1>Browse Earthquakes</h1>
                    </header>
                    <form class="filters">
                        <div class="control stacked location">
                            <div class="pairing text">
                                <label for="location">Enter your address or use <a class="findMe" href="javascript:void(0)">your location</a></label>
                                <input type="text" id="addressSearch" placeholder="Start typing your address...">
                                <div id="location-awareness-input">
                                    <input type="text" class="no-show" name="lat" id="latitudeSearch">
                                    <input type="text" class="no-show" name="lng" id="longitudeSearch">
                                </div>
                            </div>
                            <div class="pairing radius">
                                <label for="radius">Search Radius</label>
                                <select name="search-radius" id="search-radius">
                                    <option value="3220">2 miles</option>
                                    <option value="8047">5 miles</option>
                                    <option value="16093">10 miles</option>
                                    <option value="24140">15 miles</option>
                                    <option value="32186">20 miles</option>
                                    <option value="80467">50 miles</option>
                                    <option value="160934">100 miles</option>
                                </select>
                            </div>
                        </div><!--/ .location -->
                        <div class="control submit clearfix">
                            <button type="button" id="submit">Submit</button>
                        </div>
                        <div class="control toggle faultlines">
                            <input type="checkbox" id="fault-lines" name="fault-lines" value="show">
                            <label for="fault-lines">Show fault lines</label>
                        </div>
                        <div class="control toggle counties">
                            <input type="checkbox" id="county-boundaries" name="county-boundaries" value="show">
                            <label for="county-boundaries">Show county boundaries</label>
                        </div>
                        <!--
                        <div class="control more-options clearfix">
                            <button>Explore the map further</button>
                        </div>
                        -->
                    </form>
                </div>
                <figure class="module content-map-container">
                </figure>
            </section>
        </div>
    </header>
    <div class="page-cols">
        <div class="inner bound clearfix">
            <div class="primary">
                <header>
                    <h1>Earthquakes greater than 2.5</h1>
                </header>
                <nav class="magnitude-log">
                    <ul>
                        {% for earthquake in earthquake_instances %}
                            <li><a href="{{ url_for('detail', title=earthquake.place|url_structure_format(earthquake.date_time), id=earthquake.id ) }}"><span>{{ earthquake.place|place_format(earthquake.date_time) }}</span><mark>{{ earthquake.mag|round_floating_point }}</mark></a></li>
                        {% endfor %}
                    </ul>
                </nav><!--/ .magnitude-log -->
            </div><!--/ .primary -->
            <div class="supportive clearfix">
                <aside class="about">
                    <h1>About Earthquake Tracker</h1>
                    <div class="prose">
                        <p></p>
                        <p></p>
                    </div>
                </aside>
                <aside class="resources">
                    <h1>Earthquake links &amp; resources</h1>
                    <ul>
                        {% include 'resources.html' %}
                    </ul>
                </aside>
            </div>
        </div>
    </div><!--/ .page-cols -->
{% endblock %}

{% block extra_js %}
    <script type="text/javascript" src="http://maps.stamen.com/js/tile.stamen.js?v1.2.4"></script>
    <script src="http://maps.google.com/maps/api/js?key=AIzaSyAtS1OYyuRY0inb23BK0nuGId3FiOC6Rb8&sensor=false&amp;libraries=places"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/geocomplete/1.4/jquery.geocomplete.min.js"></script>

    {% assets "map_app_js" %}
        <script type="text/javascript" src="{{ ASSET_URL }}"></script>
    {% endassets %}
{% endblock %}